====== recording audio as it plays ======

Maybe you want to record a VoIP chat, a song from a Flash player or any situation where you can't click a record button. Thank god recording audio from your soundcard is an easy task with alsa. Copy this snippet, taken from the arecord man page, to ''~/.asoundrc'' (create if necessary) for creating a pseudodevice: 
<code>
pcm.copy {
  type plug
  slave {
    pcm hw
  }
  route_policy copy
}
</code>

Now set your capture source from mic to mixer. Fire up a terminal and type ''amixer contents'' and you'll see something like this for your capture source:

<code>
[...]
numid=24,iface=MIXER,name='Capture Source'
  ; type=ENUMERATED,access=rw------,values=2,items=8
  ; Item #0 'Mic'
  ; Item #1 'CD'
  ; Item #2 'Video'
  ; Item #3 'Aux'
  ; Item #4 'Line'
  ; Item #5 'Mix'
  ; Item #6 'Mix Mono'
  ; Item #7 'Phone'
  : values=5,5
[...]
</code>

So on my system Item #5 is Mix. Now set it as capture device by typing:

<code>amixer cset numid=24,iface=MIXER,name='Capture Source' 5</code> 

That's it and we are done (though I am pretty sure all this can be done with the Gnome GUI Mixer Applet, too). 

Now go ahead and capture audio by using arecord:
<code>arecord -c 2 -f S16_LE -r 44100 -t wav -D copy audio.wav</code>

You should eventually use it in conjunction with [[http://lame.sourceforge.net|lame]] but it's up to you.

{{tag>alsa linux}}

~~DISCUSSION~~
